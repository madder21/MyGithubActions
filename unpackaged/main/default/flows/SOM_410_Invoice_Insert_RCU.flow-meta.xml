<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>57.0</apiVersion>
    <assignments>
        <name>Add_Transaction_Item_To_Coll</name>
        <label>Add Transaction Item To Coll</label>
        <locationX>1725</locationX>
        <locationY>1016</locationY>
        <assignmentItems>
            <assignToReference>COL_TransactionItem</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>REC_TransactionItem</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_Over_Invoice_Lines_With_Charge_Type</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Increment_Line_Number</name>
        <label>Increment Line Number</label>
        <locationX>2108</locationX>
        <locationY>570</locationY>
        <assignmentItems>
            <assignToReference>V_LineNumber</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Store</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Transaction_Item_Record_Values</name>
        <label>Set Transaction Item Record Values</label>
        <locationX>2000</locationX>
        <locationY>806</locationY>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.CurrencyIsoCode</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FX_Invoice_Currency</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.Transaction__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>REC_Transaction.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Sale</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.Product__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Iterate_Over_Invoice_Lines_With_Charge_Type.Product2Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.Quantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Iterate_Over_Invoice_Lines_With_Charge_Type.Quantity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.ExclTaxAmount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Iterate_Over_Invoice_Lines_With_Charge_Type.UnitPrice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.InclTaxAmount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Iterate_Over_Invoice_Lines_With_Charge_Type.GrossUnitPrice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.LineDiscountAmount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.IsGiftTransactionDetail__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>false</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.Client__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Order_Summary.AccountId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.TransactionDate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Invoice.InvoiceDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.TransactionLineId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FX_TransactionId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Shipment_Items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Transaction_Item_Serial_Number</name>
        <label>Set Transaction Item Serial Number</label>
        <locationX>2153</locationX>
        <locationY>1264</locationY>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.Serial_Number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Shipment_Items.SerialNumber__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Filter_Invoice_Line_With_Type_Tax</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Transaction_Item_Serial_Number_0</name>
        <label>Set Transaction Item Serial Number</label>
        <locationX>1988</locationX>
        <locationY>1089</locationY>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.Serial_Number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Filter_Invoice_Line_With_Type_Tax</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Transaction_Item_Store</name>
        <label>Set Transaction Item Store</label>
        <locationX>2373</locationX>
        <locationY>853</locationY>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.Store__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Store.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Transaction_Item_Record_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Transaction_Item_Tax_Rate</name>
        <label>Set Transaction Item Tax Rate</label>
        <locationX>1725</locationX>
        <locationY>1500</locationY>
        <assignmentItems>
            <assignToReference>REC_TransactionItem.VatRate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Iterate_Over_Invoice_Tax_Lines.TaxRate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Iterate_Over_Invoice_Tax_Lines</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Transaction_Record_Values</name>
        <label>Set Transaction Record Values</label>
        <locationX>1006</locationX>
        <locationY>781</locationY>
        <assignmentItems>
            <assignToReference>REC_Transaction.CurrencyIsoCode</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FX_Invoice_Currency</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_Transaction.SourceTransactionId__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Invoice.InvoiceNumber__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_Transaction.TransactionDate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Invoice.InvoiceDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_Transaction.TransactionChannel__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>WEB</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_Transaction.ExclTaxAmount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Invoice.TotalAmount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_Transaction.InclTaxAmount__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Invoice.TotalAmountWithTax</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_Transaction.ExclTaxTansactionShippingCost__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Order_Summary.TotalDeliveryAmount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_Transaction.InclTaxTransactionShippingCost__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Order_Summary.TotalDeliveryAmountWithTax</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_Transaction.Client__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Order_Summary.AccountId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_Transaction.ShippingMethod__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Fulfillment_Order.DeliveryMethod.ReferenceNumber</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Transaction_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Transaction_Store</name>
        <label>Set Transaction Store</label>
        <locationX>1395</locationX>
        <locationY>395</locationY>
        <assignmentItems>
            <assignToReference>REC_Transaction.Store__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Store.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Transaction_Record_Values</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>Filter_Invoice_Line_With_Type_Tax</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Filter Invoice Line With Type Tax</label>
        <locationX>1882</locationX>
        <locationY>1256</locationY>
        <assignNextValueToReference>currentItem_Filter_Invoice_Line_With_Type_Tax</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_Invoice_Lines</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Filter_Invoice_Line_With_Type_Tax.Type</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>Tax</stringValue>
            </rightValue>
        </conditions>
        <conditions>
            <leftValueReference>currentItem_Filter_Invoice_Line_With_Type_Tax.RelatedLineId</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>Iterate_Over_Invoice_Lines_With_Charge_Type.Id</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Iterate_Over_Invoice_Tax_Lines</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>Filter_Invoice_Lines_With_Charge_Type</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Filter Invoice Lines With Charge Type</label>
        <locationX>1742</locationX>
        <locationY>571</locationY>
        <assignNextValueToReference>currentItem_Filter_Invoice_Lines_With_Charge_Type</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>Get_Invoice_Lines</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Filter_Invoice_Lines_With_Charge_Type.Type</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <stringValue>Charge</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Iterate_Over_Invoice_Lines_With_Charge_Type</targetReference>
        </connector>
    </collectionProcessors>
    <constants>
        <name>Saleschannel_ManualOrder</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Manual Order</stringValue>
        </value>
    </constants>
    <constants>
        <name>Saleschannel_Rimowa</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Rimowa</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Check_Order_Summary_Saleschannel</name>
        <label>Check Order Summary Saleschannel</label>
        <locationX>622</locationX>
        <locationY>388</locationY>
        <defaultConnectorLabel>Do not create transaction records</defaultConnectorLabel>
        <rules>
            <name>Create_Transaction_records</name>
            <conditionLogic>1 AND (2 OR 3)</conditionLogic>
            <conditions>
                <leftValueReference>Get_Fulfillment_Order.Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Warehouse</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Order_Summary.SalesChannel.SalesChannelName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Saleschannel_Rimowa</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Order_Summary.SalesChannel.SalesChannelName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Saleschannel_ManualOrder</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Saleschannel_Mapping</targetReference>
            </connector>
            <label>Create Transaction records</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_SalesChannel_Mapping</name>
        <label>Check SalesChannel Mapping</label>
        <locationX>926</locationX>
        <locationY>396</locationY>
        <defaultConnector>
            <targetReference>Set_Transaction_Record_Values</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Is Empty</defaultConnectorLabel>
        <rules>
            <name>Is_Not_Empty</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Saleschannel_Mapping</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Store</targetReference>
            </connector>
            <label>Is Not Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Shipment_Items</name>
        <label>Check Shipment Items</label>
        <locationX>2145</locationX>
        <locationY>1101</locationY>
        <defaultConnector>
            <targetReference>Set_Transaction_Item_Serial_Number_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Is Empty</defaultConnectorLabel>
        <rules>
            <name>Is_Not_Empty3</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Shipment_Items</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Transaction_Item_Serial_Number</targetReference>
            </connector>
            <label>Is Not Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Store</name>
        <label>Check Store</label>
        <locationX>2373</locationX>
        <locationY>580</locationY>
        <defaultConnector>
            <targetReference>Set_Transaction_Item_Record_Values</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Is Empty</defaultConnectorLabel>
        <rules>
            <name>Is_Not_Empty4</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Store</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Transaction_Item_Store</targetReference>
            </connector>
            <label>Is Not Empty</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Store_Record</name>
        <label>Check Store Record</label>
        <locationX>1222</locationX>
        <locationY>395</locationY>
        <defaultConnector>
            <targetReference>Set_Transaction_Record_Values</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Is Empty</defaultConnectorLabel>
        <rules>
            <name>Is_Not_Empty2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Store</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Transaction_Store</targetReference>
            </connector>
            <label>Is Not Empty</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>ExclTaxAmount</name>
        <dataType>Number</dataType>
        <expression>-{!V_ExclTaxAmount}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>FX_Invoice_Currency</name>
        <dataType>String</dataType>
        <expression>TEXT({!Get_Invoice.CurrencyIsoCode})</expression>
    </formulas>
    <formulas>
        <name>FX_TransactionId</name>
        <dataType>String</dataType>
        <expression>{!Get_Invoice.InvoiceNumber__c} + &quot;/&quot; + TEXT({!V_LineNumber})</expression>
    </formulas>
    <formulas>
        <name>InclTaxAmount</name>
        <dataType>Number</dataType>
        <expression>-{!V_InclTaxAmount}</expression>
        <scale>2</scale>
    </formulas>
    <interviewLabel>SOM 410 - Invoice Insert RCU {!$Flow.CurrentDateTime}</interviewLabel>
    <label>SOM 410 - Invoice Insert RCU</label>
    <loops>
        <name>Iterate_Over_Invoice_Lines_With_Charge_Type</name>
        <label>Iterate Over Invoice Lines With Charge Type</label>
        <locationX>1913</locationX>
        <locationY>578</locationY>
        <collectionReference>Filter_Invoice_Lines_With_Charge_Type</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Increment_Line_Number</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Transaction_Items</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Iterate_Over_Invoice_Tax_Lines</name>
        <label>Iterate Over Invoice Tax Lines</label>
        <locationX>1727</locationX>
        <locationY>1256</locationY>
        <collectionReference>Filter_Invoice_Line_With_Type_Tax</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Set_Transaction_Item_Tax_Rate</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Add_Transaction_Item_To_Coll</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Transaction_Items</name>
        <label>Create Transaction Items</label>
        <locationX>1450</locationX>
        <locationY>946</locationY>
        <connector>
            <targetReference>Create_Transaction_Payment</targetReference>
        </connector>
        <inputReference>COL_TransactionItem</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_Transaction_Payment</name>
        <label>Create Transaction Payment</label>
        <locationX>1276</locationX>
        <locationY>947</locationY>
        <inputAssignments>
            <field>Client__c</field>
            <value>
                <elementReference>Get_Order_Summary.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <elementReference>FX_Invoice_Currency</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PaidAmount__c</field>
            <value>
                <elementReference>Get_Invoice.TotalAmountWithTax</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Transaction__c</field>
            <value>
                <elementReference>REC_Transaction.Id</elementReference>
            </value>
        </inputAssignments>
        <object>TransactionPayment__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Transaction_Record</name>
        <label>Create Transaction Record</label>
        <locationX>1438</locationX>
        <locationY>571</locationY>
        <connector>
            <targetReference>Get_Invoice_Lines</targetReference>
        </connector>
        <inputReference>REC_Transaction</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Fulfillment_Order</name>
        <label>Get Fulfillment Order</label>
        <locationX>457</locationX>
        <locationY>386</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Order_Summary_Saleschannel</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>InvoiceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Invoice_Id__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>FulfillmentOrder</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Invoice</name>
        <label>Get Invoice</label>
        <locationX>326</locationX>
        <locationY>249</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Order_Summary</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Invoice_Id__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Invoice</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Invoice_Lines</name>
        <label>Get Invoice Lines</label>
        <locationX>1581</locationX>
        <locationY>570</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Filter_Invoice_Lines_With_Charge_Type</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>InvoiceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Invoice_Id__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>InvoiceLine</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Order_Summary</name>
        <label>Get Order Summary</label>
        <locationX>323</locationX>
        <locationY>386</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Fulfillment_Order</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Invoice.ReferenceEntityId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OrderSummary</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Saleschannel_Mapping</name>
        <label>Get Saleschannel Mapping</label>
        <locationX>628</locationX>
        <locationY>594</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_SalesChannel_Mapping</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Zone__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Fulfillment_Order.FulfilledToCountry</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Sales_Channel_Mapping__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Shipment_Items</name>
        <label>Get Shipment Items</label>
        <locationX>2151</locationX>
        <locationY>917</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Shipment_Items</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OrderItemSummaryId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Iterate_Over_Invoice_Lines_With_Charge_Type.ReferenceEntityItemId</elementReference>
            </value>
        </filters>
        <filters>
            <field>SerialNumber__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ShipmentItem</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Store</name>
        <label>Get Store</label>
        <locationX>1107</locationX>
        <locationY>392</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Store_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SourceStoreId__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Saleschannel_Mapping.ChannelId__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Store__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>201</locationX>
        <locationY>45</locationY>
        <connector>
            <targetReference>Get_Invoice</targetReference>
        </connector>
        <object>InvoiceCreated__e</object>
        <triggerType>PlatformEvent</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>COL_TransactionItem</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TransactionItem__c</objectType>
    </variables>
    <variables>
        <name>currentItem_Filter_Invoice_Line_With_Type_Tax</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>InvoiceLine</objectType>
    </variables>
    <variables>
        <name>currentItem_Filter_Invoice_Lines_With_Charge_Type</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>InvoiceLine</objectType>
    </variables>
    <variables>
        <name>REC_Transaction</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Transaction__c</objectType>
    </variables>
    <variables>
        <name>REC_TransactionItem</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TransactionItem__c</objectType>
    </variables>
    <variables>
        <name>V_ExclTaxAmount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>V_InclTaxAmount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>V_LineNumber</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
</Flow>
