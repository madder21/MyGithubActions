<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>57.0</apiVersion>
    <assignments>
        <name>Add_Order_Item_To_Collection</name>
        <label>Add Order Item To Collection</label>
        <locationX>164</locationX>
        <locationY>1191</locationY>
        <assignmentItems>
            <assignToReference>COL_OrderItem</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>REC_OrderItem</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Assign_New_Order_Summary_Number_Output</name>
        <label>Assign New Order Summary Number Output</label>
        <locationX>929</locationX>
        <locationY>27</locationY>
        <assignmentItems>
            <assignToReference>v_orderSummaryNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>v_SourceOrder.OrderReferenceNumber</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_ODG</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_fields_in_Items</name>
        <label>Set fields in Items</label>
        <locationX>975</locationX>
        <locationY>376</locationY>
        <assignmentItems>
            <assignToReference>Loop_Items.OrderId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CreatedOrderId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Items.OrderDeliveryGroupId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Create_ODG</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>v_orderItemsUpdated</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_Items</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_fields_in_Items_0</name>
        <label>Set fields in Items</label>
        <locationX>420</locationX>
        <locationY>732</locationY>
        <assignmentItems>
            <assignToReference>L30_taxes.OrderItemId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>L20_Created_Order_Items.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>C_TaxesToPersist</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>L30_taxes</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>L20_Created_Order_Items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Order_Item_Values</name>
        <label>Set Order Item Values</label>
        <locationX>50</locationX>
        <locationY>1195</locationY>
        <assignmentItems>
            <assignToReference>REC_OrderItem.Type</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Order Product</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.OrderId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Create_Order</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.ReservedAtLocationId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Items.ReservedAtLocationId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.TotalLineAmount</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.UnitPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Items.Quantity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.LineNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Items.LineNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.Description</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Items.Description</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.Product2Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Items.Product2Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.PricebookEntryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Items.PricebookEntryId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.OrderDeliveryGroupId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Create_ODG</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>REC_OrderItem.CurrencyIsoCode</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Items.CurrencyIsoCode</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Order_Item_To_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Reference_Number_0</name>
        <label>Set Reference Number</label>
        <locationX>1344</locationX>
        <locationY>29</locationY>
        <assignmentItems>
            <assignToReference>v_SourceOrder.OrderReferenceNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FX_FirstReferenceNumber</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Order</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Reference_Number_0_0</name>
        <label>Set Reference Number</label>
        <locationX>1169</locationX>
        <locationY>244</locationY>
        <assignmentItems>
            <assignToReference>v_SourceOrder.OrderReferenceNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>FX_ReferenceNumber</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Order</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Any_Taxes_to_Create</name>
        <label>Any Taxes to Create?</label>
        <locationX>840</locationX>
        <locationY>743</locationY>
        <defaultConnector>
            <targetReference>Create_Payment_Group</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>C_TaxesToPersist</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Order_Tax_Line_Items</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Exist</name>
        <label>Exist</label>
        <locationX>1338</locationX>
        <locationY>249</locationY>
        <defaultConnector>
            <targetReference>Set_Reference_Number_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Last_Reference_Number</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Reference_Number_0_0</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Tax_Is_Null</name>
        <label>Tax Is Null</label>
        <locationX>416</locationX>
        <locationY>960</locationY>
        <defaultConnector>
            <targetReference>Set_fields_in_Items_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes2</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>L30_taxes.Rate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>L30_taxes.Amount</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>L20_Created_Order_Items.UnitPrice</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>L20_Created_Order_Items</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>tax local type = gross</description>
    <formulas>
        <name>FX_FirstReferenceNumber</name>
        <dataType>String</dataType>
        <expression>&quot;MA000000001&quot;</expression>
    </formulas>
    <formulas>
        <name>FX_LastReferenceNumber</name>
        <dataType>Number</dataType>
        <expression>VALUE(SUBSTITUTE({!Get_Last_Reference_Number.OrderReferenceNumber}, &quot;MA&quot;, &quot;&quot;))</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>FX_LastReferenceNumberAdapted</name>
        <dataType>String</dataType>
        <expression>IF(LEN(TEXT({!FX_LastReferenceNumber})) &lt; LEN(TEXT({!FX_NewReferenceNumber})), &quot;0&quot;+TEXT({!FX_LastReferenceNumber}), TEXT({!FX_LastReferenceNumber}))</expression>
    </formulas>
    <formulas>
        <name>FX_NewReferenceNumber</name>
        <dataType>Number</dataType>
        <expression>{!FX_LastReferenceNumber} + 1</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>FX_OrderName</name>
        <dataType>String</dataType>
        <expression>{!v_SourceOrder.BillingContactFirstName__c}  + &quot;  &quot; + {!v_SourceOrder.BillingContactLastName__c}</expression>
    </formulas>
    <formulas>
        <name>FX_ReferenceNumber</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!Get_Last_Reference_Number.OrderReferenceNumber},{!FX_LastReferenceNumberAdapted}, TEXT({!FX_NewReferenceNumber}))</expression>
    </formulas>
    <interviewLabel>SOM 970 {!$Flow.CurrentDateTime}</interviewLabel>
    <label>SOM 970 Create Exchange/Manual Order</label>
    <loops>
        <name>L20_Created_Order_Items</name>
        <label>L20 Created Order Items</label>
        <locationX>686</locationX>
        <locationY>740</locationY>
        <collectionReference>v_orderItemsUpdated</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>L30_taxes</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Any_Taxes_to_Create</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>L30_taxes</name>
        <label>L30 taxes</label>
        <locationX>687</locationX>
        <locationY>961</locationY>
        <collectionReference>v_SourceOrderTaxLines</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Tax_Is_Null</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>L20_Created_Order_Items</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Items</name>
        <label>Loop Items</label>
        <locationX>691</locationX>
        <locationY>376</locationY>
        <collectionReference>v_SourceOrderItems</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Set_fields_in_Items</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Order_Items</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_ODG</name>
        <label>Create ODG</label>
        <locationX>690</locationX>
        <locationY>29</locationY>
        <connector>
            <targetReference>Loop_Items</targetReference>
        </connector>
        <inputAssignments>
            <field>DeliverToCity</field>
            <value>
                <elementReference>v_SourceODG.DeliverToCity</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>DeliverToCountry</field>
            <value>
                <elementReference>v_SourceODG.DeliverToCountry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>DeliverToName</field>
            <value>
                <elementReference>v_SourceODG.DeliverToName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>DeliverToPostalCode</field>
            <value>
                <elementReference>v_SourceODG.DeliverToPostalCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>DeliverToState</field>
            <value>
                <elementReference>v_SourceODG.DeliverToState</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>DeliverToStreet</field>
            <value>
                <elementReference>v_SourceODG.DeliverToStreet</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description</field>
            <value>
                <elementReference>v_SourceODG.Description</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>EmailAddress</field>
            <value>
                <elementReference>v_SourceODG.EmailAddress</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OrderDeliveryMethodId</field>
            <value>
                <elementReference>v_SourceODG.OrderDeliveryMethodId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OrderId</field>
            <value>
                <elementReference>CreatedOrderId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PhoneNumber</field>
            <value>
                <elementReference>v_SourceODG.PhoneNumber</elementReference>
            </value>
        </inputAssignments>
        <object>OrderDeliveryGroup</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Order</name>
        <label>Create Order</label>
        <locationX>1167</locationX>
        <locationY>30</locationY>
        <assignRecordIdToReference>CreatedOrderId</assignRecordIdToReference>
        <connector>
            <targetReference>Assign_New_Order_Summary_Number_Output</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>v_SourceOrder.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingCity</field>
            <value>
                <elementReference>v_SourceOrder.BillingCity</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingContactFirstName__c</field>
            <value>
                <elementReference>v_SourceOrder.BillingContactFirstName__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingContactLastName__c</field>
            <value>
                <elementReference>v_SourceOrder.BillingContactLastName__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingCountry</field>
            <value>
                <elementReference>v_SourceOrder.BillingCountry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingEmailAddress</field>
            <value>
                <elementReference>v_SourceOrder.BillingEmailAddress</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingPhoneNumber</field>
            <value>
                <elementReference>v_SourceOrder.BillingPhoneNumber</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingPostalCode</field>
            <value>
                <elementReference>v_SourceOrder.BillingPostalCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingState</field>
            <value>
                <elementReference>v_SourceOrder.BillingState</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BillingStreet</field>
            <value>
                <elementReference>v_SourceOrder.BillingStreet</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <elementReference>v_SourceOrder.CurrencyIsoCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>DeliverySignature__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>EffectiveDate</field>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>FX_OrderName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OrderReferenceNumber</field>
            <value>
                <elementReference>v_SourceOrder.OrderReferenceNumber</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OrderedDate</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OriginalOrder__c</field>
            <value>
                <elementReference>v_SourceOrder.OriginalOrder__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OriginalReturnOrder__c</field>
            <value>
                <elementReference>v_SourceOrder.OriginalReturnOrder__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Pricebook2Id</field>
            <value>
                <elementReference>v_SourceOrder.Pricebook2Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SalesChannelId</field>
            <value>
                <elementReference>get_SalesChannel_Manual.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Draft</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>TaxLocaleType</field>
            <value>
                <stringValue>Gross</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>captureAtShipment__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>language__c</field>
            <value>
                <elementReference>v_SourceOrder.language__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>passedFraudScreening__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>Order</object>
    </recordCreates>
    <recordCreates>
        <name>Create_Order_Items</name>
        <label>Create Order Items</label>
        <locationX>685</locationX>
        <locationY>571</locationY>
        <connector>
            <targetReference>L20_Created_Order_Items</targetReference>
        </connector>
        <inputReference>v_orderItemsUpdated</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_Order_Tax_Line_Items</name>
        <label>Create Order Tax Line Items</label>
        <locationX>1103</locationX>
        <locationY>744</locationY>
        <connector>
            <targetReference>Create_Payment_Group</targetReference>
        </connector>
        <inputReference>C_TaxesToPersist</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_Payment</name>
        <label>Create Payment</label>
        <locationX>1528</locationX>
        <locationY>749</locationY>
        <connector>
            <targetReference>Update_Order_to_Activated</targetReference>
        </connector>
        <inputAssignments>
            <field>Amount</field>
            <value>
                <elementReference>Get_Created_Order.GrandTotalAmount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <elementReference>v_SourceOrder.CurrencyIsoCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Date</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PaymentGroupId</field>
            <value>
                <elementReference>Create_Payment_Group</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PaymentMethodId</field>
            <value>
                <elementReference>Create_Payment_Method</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ProcessingMode</field>
            <value>
                <stringValue>External</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Processed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <stringValue>Capture</stringValue>
            </value>
        </inputAssignments>
        <object>Payment</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Payment_Auth</name>
        <label>Create Payment Auth</label>
        <locationX>1637</locationX>
        <locationY>544</locationY>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>v_SourceOrder.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Amount</field>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <elementReference>v_SourceOrder.CurrencyIsoCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>GatewayRefNumber</field>
            <value>
                <stringValue>43434343</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ProcessingMode</field>
            <value>
                <stringValue>External</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Processed</stringValue>
            </value>
        </inputAssignments>
        <object>PaymentAuthorization</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Payment_Group</name>
        <label>Create Payment Group</label>
        <locationX>1099</locationX>
        <locationY>582</locationY>
        <connector>
            <targetReference>Create_Payment_Method</targetReference>
        </connector>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <elementReference>v_SourceOrder.CurrencyIsoCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SourceObjectId</field>
            <value>
                <elementReference>CreatedOrderId</elementReference>
            </value>
        </inputAssignments>
        <object>PaymentGroup</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Payment_Method</name>
        <label>Create Payment Method</label>
        <locationX>1226</locationX>
        <locationY>583</locationY>
        <connector>
            <targetReference>Get_Created_Order</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>v_SourceOrder.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>NickName</field>
            <value>
                <stringValue>No Payment</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ProcessingMode</field>
            <value>
                <stringValue>External</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Active</stringValue>
            </value>
        </inputAssignments>
        <object>AlternativePaymentMethod</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_Created_Order</name>
        <label>Get Created Order</label>
        <locationX>1368</locationX>
        <locationY>584</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_Payment</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CreatedOrderId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Order</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Last_Reference_Number</name>
        <label>Get Last Reference Number</label>
        <locationX>1515</locationX>
        <locationY>247</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Exist</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OrderReferenceNumber</field>
            <operator>StartsWith</operator>
            <value>
                <stringValue>MA</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Order</object>
        <sortField>OrderReferenceNumber</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_SalesChannel_Manual</name>
        <label>get SalesChannel Manual</label>
        <locationX>1687</locationX>
        <locationY>247</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Last_Reference_Number</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SalesChannelName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Manual Order</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SalesChannel</object>
        <sortField>Id</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Order_to_Activated</name>
        <label>Update Order to Activated</label>
        <locationX>1720</locationX>
        <locationY>751</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CreatedOrderId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Activated</stringValue>
            </value>
        </inputAssignments>
        <object>Order</object>
    </recordUpdates>
    <start>
        <locationX>1562</locationX>
        <locationY>48</locationY>
        <connector>
            <targetReference>get_SalesChannel_Manual</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>C_TaxesToPersist</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItemTaxLineItem</objectType>
    </variables>
    <variables>
        <name>COL_OrderItem</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>CreatedOrderId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>REC_OrderItem</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>v_orderItemsUpdated</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>v_orderSummaryNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>v_SourceODG</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderDeliveryGroup</objectType>
    </variables>
    <variables>
        <name>v_SourceOrder</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Order</objectType>
    </variables>
    <variables>
        <name>v_SourceOrderItems</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItem</objectType>
    </variables>
    <variables>
        <name>v_SourceOrderTaxLines</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItemTaxLineItem</objectType>
    </variables>
</Flow>
