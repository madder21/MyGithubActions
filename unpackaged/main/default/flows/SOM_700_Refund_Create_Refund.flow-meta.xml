<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Adjust_Shipping</name>
        <label>Adjust Shipping</label>
        <locationX>38</locationX>
        <locationY>866</locationY>
        <actionName>adjustOrderItemSummariesSubmit</actionName>
        <actionType>adjustOrderItemSummariesSubmit</actionType>
        <connector>
            <targetReference>Recalculate_Refund_Amount</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>orderItemSummariesToAdjust</name>
            <value>
                <elementReference>S_AdjustShippingInputRepresentation</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>orderSummaryId</name>
            <value>
                <elementReference>Get_RO_Record.OrderSummaryId</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>S_adjustShippingOutputRepresentation</assignToReference>
            <name>adjustOutput</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Create_Credit_Memo</name>
        <label>Create Credit Memo</label>
        <locationX>566</locationX>
        <locationY>1504</locationY>
        <actionName>createCreditMemoOrderSummary</actionName>
        <actionType>createCreditMemoOrderSummary</actionType>
        <connector>
            <targetReference>Get_OS</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_Screen_0</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>creditMemoInput</name>
            <value>
                <elementReference>S_CreateCreditMemoInputRepresentation</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>orderSummaryId</name>
            <value>
                <elementReference>Get_RO_Record.OrderSummaryId</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>S_CreateCreditMemoOutputRepresentation</assignToReference>
            <name>creditMemoOutput</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>ensure_Refunds</name>
        <label>ensure Refunds</label>
        <locationX>1635</locationX>
        <locationY>2338</locationY>
        <actionName>ensureRefundsOrderSummaryAsync</actionName>
        <actionType>ensureRefundsOrderSummaryAsync</actionType>
        <connector>
            <targetReference>Finish_Screen</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>ensureRefundsAsyncInput</name>
            <value>
                <elementReference>S_EnsureRefundsAsyncInputRepresentation</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>orderSummaryId</name>
            <value>
                <elementReference>Get_RO_Record.OrderSummaryId</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Return_Return_Order_Items</name>
        <label>Return Return Order Items</label>
        <locationX>448</locationX>
        <locationY>1336</locationY>
        <actionName>returnReturnOrderItems</actionName>
        <actionType>returnReturnOrderItems</actionType>
        <connector>
            <targetReference>Assign_Credit_Memo_Data</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_Screen</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>returnItemsInput</name>
            <value>
                <elementReference>S_ReturnItemsInputRepresentation</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>returnOrderId</name>
            <value>
                <elementReference>Get_RO_Record.Id</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>S_ReturnItemsOutputRepresentation</assignToReference>
            <name>returnItemsOutput</name>
        </outputParameters>
    </actionCalls>
    <apiVersion>55.0</apiVersion>
    <assignments>
        <name>Assign_Allow_Checkbox</name>
        <label>Assign Allow Checkbox</label>
        <locationX>947</locationX>
        <locationY>528</locationY>
        <assignmentItems>
            <assignToReference>AllowShip</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_OrderPaymentSummary</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_And_Stack_CML</name>
        <label>Assign And Stack CML</label>
        <locationX>1949</locationX>
        <locationY>1750</locationY>
        <assignmentItems>
            <assignToReference>S_CreditMemoLine.ReturnOrderLineItem__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>L30_Loop_Over_ROLIs_To_map_CML.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_CreditMemoLine.Reason__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Return</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_CreditMemoLine.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>L20_Loop_Over_CreditMemoLines.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>C_CreditMemoLines</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>S_CreditMemoLine</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>L20_Loop_Over_CreditMemoLines</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Credit_Memo_Data</name>
        <label>Assign Credit Memo Data</label>
        <locationX>447</locationX>
        <locationY>1505</locationY>
        <assignmentItems>
            <assignToReference>S_CreateCreditMemoInputRepresentation.changeOrderIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>S_ReturnItemsOutputRepresentation.changeOrderId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Credit_Memo</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Data_To_Ensure_Refund</name>
        <label>Assign Data To Ensure Refund</label>
        <locationX>1636</locationX>
        <locationY>2152</locationY>
        <assignmentItems>
            <assignToReference>S_EnsureRefundsAsyncInputRepresentation.creditMemoId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>S_CreateCreditMemoOutputRepresentation.creditMemoId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ensure_Refunds</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Return_Items_Input_Representation_Data</name>
        <label>Assign Return Items Input Representation Data</label>
        <locationX>1751</locationX>
        <locationY>1344</locationY>
        <assignmentItems>
            <assignToReference>S_ReturnItemsInputRepresentation.returnOrderItems</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>C_ReturnOrderItemInputRepresentation</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_ReturnItemsInputRepresentation.returnOrderItemDeliveryCharges</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>C_ReturnOrderItemDeliveryCharge</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Return_Return_Order_Items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Shipping_Item_Input</name>
        <label>Assign Shipping Item Input</label>
        <locationX>30</locationX>
        <locationY>724</locationY>
        <assignmentItems>
            <assignToReference>AdjustShippingItemInputRepresentation.adjustmentType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>AmountWithTax</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AdjustShippingItemInputRepresentation.orderItemSummaryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Order_Product_Summary_0.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AdjustShippingItemInputRepresentation.reason</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>RE03</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AdjustShippingItemInputRepresentation.amount</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TestMME_CamculateAmount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_AdjustShippingInputRepresentation.adjustItems</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>AdjustShippingItemInputRepresentation</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Adjust_Shipping</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Calculate_Refund_Amount</name>
        <label>Calculate Refund Amount</label>
        <locationX>1805</locationX>
        <locationY>75</locationY>
        <assignmentItems>
            <assignToReference>V_Refund_Amount</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>FX_ROLI_Amount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>C_ReturnOrderLineItem</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>L10_Loop_Over_ROLIs</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_ReturnOrderItemInputRepresentation.returnOrderLineItemId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>L10_Loop_Over_ROLIs.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_ReturnOrderItemInputRepresentation.quantityReceived</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>L10_Loop_Over_ROLIs.QuantityReceived</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_ReturnOrderItemInputRepresentation.quantityRejected</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>L10_Loop_Over_ROLIs.QuantityRejected</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_ReturnOrderItemInputRepresentation.quantityReturned</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>L10_Loop_Over_ROLIs.QuantityReceived</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_ReturnOrderItemInputRepresentation.reasonForRejection</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>L10_Loop_Over_ROLIs.ReasonForRejection</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_ReturnOrderItemInputRepresentation.quantityToCancel</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>L10_Loop_Over_ROLIs.QuantityRejected</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>C_ReturnOrderItemInputRepresentation</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>S_ReturnOrderItemInputRepresentation</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>V_Refunded_Items</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>FX_Generate_Refunded_Items</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>L10_Loop_Over_ROLIs</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Recalculate_Refund_Amount</name>
        <label>Recalculate Refund Amount</label>
        <locationX>217</locationX>
        <locationY>944</locationY>
        <assignmentItems>
            <assignToReference>V_Refund_Amount</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Order_Product_Summary_0.TotalAmtWithTax</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>S_CreateCreditMemoInputRepresentation.changeOrderIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>S_adjustShippingOutputRepresentation.postFulfillmentChangeOrderId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_OPS_Refunds</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Sum_Refunds_Amount</name>
        <label>Sum Refunds Amount</label>
        <locationX>883</locationX>
        <locationY>1146</locationY>
        <assignmentItems>
            <assignToReference>SUM_Amount</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_Amount_OPS_Refunds.Amount</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Amount_OPS_Refunds</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Any_Return_Order_to_Process</name>
        <label>Any Return Order to Process ?</label>
        <locationX>847</locationX>
        <locationY>410</locationY>
        <defaultConnector>
            <targetReference>No_Ro_To_Process</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>RO Not Exist</defaultConnectorLabel>
        <rules>
            <name>Yes_RO_Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_RO_Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_RO_Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Received</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_RO_Record.Already_Refunded__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_if_Payment_is_captured</targetReference>
            </connector>
            <label>Yes RO Exist</label>
        </rules>
        <rules>
            <name>Return_Order_Already_Refunded</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_RO_Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_RO_Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Received</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_RO_Record.Already_Refunded__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Screen_Return_Order_Already_Refunded</targetReference>
            </connector>
            <label>Return Order Already Refunded</label>
        </rules>
        <rules>
            <name>RO_Not_In_Received_Status</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_RO_Record.Status</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Received</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_RO_Record.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>RO_Not_In_Recieved_Status</targetReference>
            </connector>
            <label>RO Not In Received Status</label>
        </rules>
    </decisions>
    <decisions>
        <name>Any_ROLI_To_Process</name>
        <label>Any ROLI To Process</label>
        <locationX>1595</locationX>
        <locationY>388</locationY>
        <defaultConnector>
            <targetReference>RO_ROLI_Exist_Screen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No ROLI Exist</defaultConnectorLabel>
        <rules>
            <name>Yes_ROLIs_Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_ReturnOrderLineItems</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>L10_Loop_Over_ROLIs</targetReference>
            </connector>
            <label>Yes ROLIs Exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>Ceck_if_CML_Match_ROLI</name>
        <label>Ceck if CML Match ROLI</label>
        <locationX>1941</locationX>
        <locationY>1549</locationY>
        <defaultConnector>
            <targetReference>L30_Loop_Over_ROLIs_To_map_CML</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>CML_are_Matching_ROLI</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>L20_Loop_Over_CreditMemoLines.Product2.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>L30_Loop_Over_ROLIs_To_map_CML.Product2.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_And_Stack_CML</targetReference>
            </connector>
            <label>CML And ROLI are Matching</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Amount</name>
        <label>Check Amount ?</label>
        <locationX>1271</locationX>
        <locationY>672</locationY>
        <defaultConnector>
            <targetReference>Error_on_Amount_Field</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Amount Not applicable</defaultConnectorLabel>
        <rules>
            <name>Go</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>V_Refund_Amount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Order_Product_Summary</targetReference>
            </connector>
            <label>Go</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Captured_FO_exist</name>
        <label>Check Captured FO exist</label>
        <locationX>1416</locationX>
        <locationY>194</locationY>
        <defaultConnector>
            <targetReference>No_Initial_Capture</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>FO does not Exist</defaultConnectorLabel>
        <rules>
            <name>FO_Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Captured_FO</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_ReturnOrderLineItems</targetReference>
            </connector>
            <label>FO Exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_Payment_is_captured</name>
        <label>Check if Payment is captured</label>
        <locationX>1060</locationX>
        <locationY>396</locationY>
        <defaultConnector>
            <targetReference>No_Initial_Capture</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Payment not Captured</defaultConnectorLabel>
        <rules>
            <name>Payment_Captured</name>
            <conditionLogic>(1 AND 2) OR (1 AND 3 AND 4)</conditionLogic>
            <conditions>
                <leftValueReference>Get_RO_Record.OrderSummary.captureAtShipment__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_RO_Record.OrderSummary.CaptureStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Not Applicable</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_RO_Record.OrderSummary.CaptureStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Captured</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_RO_Record.OrderSummary.passedFraudScreening__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_ReturnOrderLineItems</targetReference>
            </connector>
            <label>Payment Captured</label>
        </rules>
        <rules>
            <name>Payment_In_FO_Level</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_RO_Record.OrderSummary.captureAtShipment__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_RO_Record.OrderSummary.CaptureStatus__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Not Applicable</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Captured_FO</targetReference>
            </connector>
            <label>Payment In FO Level</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Refund_Amount</name>
        <label>Check Refund Amount</label>
        <locationX>1163</locationX>
        <locationY>949</locationY>
        <defaultConnector>
            <targetReference>Refund_Not_Possible</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Refund not Possible</defaultConnectorLabel>
        <rules>
            <name>Refund_possible</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SUM_Amount_plus_Current_Refund</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>Get_OrderPaymentSummary.CapturedAmount</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Refund_Record_0</targetReference>
            </connector>
            <label>Refund possible</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_The_Shipping_Fee_Refund</name>
        <label>Check The Shipping Fee Refund</label>
        <locationX>412</locationX>
        <locationY>805</locationY>
        <defaultConnector>
            <targetReference>Get_OPS_Refunds</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>TheShippingFeeRefund</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AllowingTheShippingFeeRefund.value</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_All_RO.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Order_Product_Summary.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Order_Product_Summary_0</targetReference>
            </connector>
            <label>TheShippingFeeRefund</label>
        </rules>
    </decisions>
    <decisions>
        <name>Delivery_Charge_Null_OR_0</name>
        <label>Delivery Charge Null OR 0</label>
        <locationX>939</locationX>
        <locationY>711</locationY>
        <defaultConnector>
            <targetReference>Get_OrderPaymentSummary</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Order_Product_Summary</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Allow_Checkbox</targetReference>
            </connector>
            <label>Null</label>
        </rules>
        <rules>
            <name>X0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Order_Product_Summary.UnitPrice</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Allow_Checkbox</targetReference>
            </connector>
            <label>0</label>
        </rules>
    </decisions>
    <decisions>
        <name>Previous_Credit_Memo_Exists</name>
        <label>Previous Credit Memo Exists?</label>
        <locationX>1209</locationX>
        <locationY>1510</locationY>
        <defaultConnector>
            <targetReference>Update_Credit_Memo1</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Does not Exist</defaultConnectorLabel>
        <rules>
            <name>Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Last_Credit_Memo_Record</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Credit_Memo</targetReference>
            </connector>
            <label>Exist</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>AllowingTheShippingFeeRefundValue</name>
        <dataType>Boolean</dataType>
        <expression>IF({!AllowingTheShippingFeeRefund.value}, true, false)</expression>
    </formulas>
    <formulas>
        <name>FX_CreditMemoCountry</name>
        <dataType>String</dataType>
        <expression>RIGHT({!Get_Last_Credit_Memo_Record.DocumentNumber__c}, 2)</expression>
    </formulas>
    <formulas>
        <name>FX_CreditMemoDocumentNumber</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE({!Get_Last_Credit_Memo_Record.DocumentNumber__c}, {!FX_LastCreditMemoNumberAdapted}, TEXT({!FX_NewCreditMemoNumber}))</expression>
    </formulas>
    <formulas>
        <name>FX_Currency_ISO_Code</name>
        <dataType>String</dataType>
        <expression>Text({!Get_RO_Record.CurrencyIsoCode})</expression>
    </formulas>
    <formulas>
        <name>FX_First_Credit_Memo_Ever_Created</name>
        <dataType>String</dataType>
        <expression>&quot;CM000001&quot; + {!Get_Order_Delivery_Group_Summary.DeliverToCountry}</expression>
    </formulas>
    <formulas>
        <name>FX_Generate_Refunded_Items</name>
        <dataType>String</dataType>
        <expression>if(ISBLANK({!V_Refunded_Items})  , &quot;&quot; , BR() ) +
&quot;- SKU: &quot; + {!L10_Loop_Over_ROLIs.Product2.StockKeepingUnit} + 
&quot;; Quantity: &quot; + TEXT({!L10_Loop_Over_ROLIs.QuantityReceived}) + 
&quot;; UnitPrice: &quot; + TEXT({!L10_Loop_Over_ROLIs.OrderItemSummary.GrossUnitPrice}) + 
&quot;; TotalAmount: &quot; +TEXT({!L10_Loop_Over_ROLIs.OrderItemSummary.TotalAmtWithTax})</expression>
    </formulas>
    <formulas>
        <name>FX_LastCreditMemoNumber</name>
        <dataType>Number</dataType>
        <expression>VALUE(SUBSTITUTE(SUBSTITUTE({!Get_Last_Credit_Memo_Record.DocumentNumber__c}, &quot;CM&quot;, &quot;&quot;), {!FX_CreditMemoCountry}, &quot;&quot;))</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>FX_LastCreditMemoNumberAdapted</name>
        <dataType>String</dataType>
        <expression>IF(LEN(TEXT({!FX_LastCreditMemoNumber})) &lt; LEN(TEXT({!FX_NewCreditMemoNumber})), &quot;0&quot;+TEXT({!FX_LastCreditMemoNumber}), TEXT({!FX_LastCreditMemoNumber}))</expression>
    </formulas>
    <formulas>
        <name>FX_NewCreditMemoNumber</name>
        <dataType>Number</dataType>
        <expression>{!FX_LastCreditMemoNumber} + 1</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>FX_Refund_TotalAmount_Todisplay</name>
        <dataType>Currency</dataType>
        <expression>{!V_Refund_Amount}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>FX_RefundAmountToDisplayWithIsoCode</name>
        <dataType>String</dataType>
        <expression>IF(CONTAINS(TEXT({!V_Refund_Amount}), &quot;.&quot;),SUBSTITUTE(TEXT({!V_Refund_Amount}) , &quot;.&quot;, &quot;,&quot;), TEXT({!V_Refund_Amount})+&quot;,00&quot;) +&quot; &quot; + {!FX_Currency_ISO_Code}</expression>
    </formulas>
    <formulas>
        <name>FX_ROLI_Amount</name>
        <dataType>Currency</dataType>
        <expression>{!L10_Loop_Over_ROLIs.TotalAmount}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>SUM_Amount_plus_Current_Refund</name>
        <dataType>Currency</dataType>
        <expression>{!V_Refund_Amount} + {!SUM_Amount} + {!Get_Order_Delivery_Group_Summary.GrandTotalAmount}</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>TestMME_CamculateAmount</name>
        <dataType>Number</dataType>
        <expression>-{!Get_Order_Product_Summary_0.TotalAmtWithTax}</expression>
        <scale>2</scale>
    </formulas>
    <interviewLabel>SOM 700 - Refund- Create Refund {!$Flow.CurrentDateTime}</interviewLabel>
    <label>SOM 700 - Refund- Create Refund</label>
    <loops>
        <name>L10_Loop_Over_ROLIs</name>
        <label>L10 Loop Over ROLIs</label>
        <locationX>1803</locationX>
        <locationY>387</locationY>
        <collectionReference>Get_ReturnOrderLineItems</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Calculate_Refund_Amount</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Check_Amount</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>L20_Loop_Over_CreditMemoLines</name>
        <label>L20 Loop Over CreditMemoLines</label>
        <locationX>1637</locationX>
        <locationY>1750</locationY>
        <collectionReference>Get_Credit_Memo_Lines</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>L30_Loop_Over_ROLIs_To_map_CML</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_CreditMemoLines</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>L30_Loop_Over_ROLIs_To_map_CML</name>
        <label>L30 Loop Over ROLIs To map CML</label>
        <locationX>1638</locationX>
        <locationY>1545</locationY>
        <collectionReference>Get_ReturnOrderLineItems</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Ceck_if_CML_Match_ROLI</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>L20_Loop_Over_CreditMemoLines</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Amount_OPS_Refunds</name>
        <label>Loop Amount OPS Refunds</label>
        <locationX>887</locationX>
        <locationY>944</locationY>
        <collectionReference>Get_OPS_Refunds</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Sum_Refunds_Amount</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Check_Refund_Amount</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Refund_Record_0</name>
        <label>Create Refund Record</label>
        <locationX>1407</locationX>
        <locationY>945</locationY>
        <assignRecordIdToReference>Created_Refund_Id</assignRecordIdToReference>
        <connector>
            <targetReference>Update_Return_Order</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_Screen</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>Get_RO_Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Amount</field>
            <value>
                <elementReference>V_Refund_Amount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <elementReference>FX_Currency_ISO_Code</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Date</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>EffectiveDate</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OrderPaymentSummaryId</field>
            <value>
                <elementReference>Get_OrderPaymentSummary.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PaymentMethodId</field>
            <value>
                <elementReference>Get_OrderPaymentSummary.PaymentMethodId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ProcessingMode</field>
            <value>
                <stringValue>External</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RefundOrigin__c</field>
            <value>
                <stringValue>Return</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RefundedItems__c</field>
            <value>
                <elementReference>V_Refunded_Items</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Draft</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <stringValue>Referenced</stringValue>
            </value>
        </inputAssignments>
        <object>Refund</object>
    </recordCreates>
    <recordCreates>
        <name>Public_New_CM_for_Cegid</name>
        <label>Public New CM for Cegid</label>
        <locationX>2052</locationX>
        <locationY>2338</locationY>
        <connector>
            <targetReference>Close_Return_Order</targetReference>
        </connector>
        <inputAssignments>
            <field>CreditMemoId__c</field>
            <value>
                <elementReference>Get_CreditMemo_Reocord.Id</elementReference>
            </value>
        </inputAssignments>
        <object>NewCreditMemoForCegid__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Publish_Created_Credit_Memo_Event</name>
        <label>Publish Created Credit Memo Event</label>
        <locationX>1910</locationX>
        <locationY>2337</locationY>
        <connector>
            <targetReference>Public_New_CM_for_Cegid</targetReference>
        </connector>
        <inputAssignments>
            <field>CreditMemoId__c</field>
            <value>
                <elementReference>Get_CreditMemo_Reocord.Id</elementReference>
            </value>
        </inputAssignments>
        <object>CreditMemoCreated__e</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_All_RO</name>
        <label>Get All RO</label>
        <locationX>854</locationX>
        <locationY>269</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Any_Return_Order_to_Process</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OrderSummaryId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_RO_Record.OrderSummary.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Tech_ShippingFeeRefund__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ReturnOrder</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Captured_FO</name>
        <label>Get Captured FO</label>
        <locationX>1279</locationX>
        <locationY>298</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Captured_FO_exist</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OrderSummaryId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_RO_Record.OrderSummary.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Capture_Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Captured</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>FulfillmentOrder</object>
        <sortField>Id</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Created_Refund_Number</name>
        <label>Get Created Refund Number</label>
        <locationX>1751</locationX>
        <locationY>1176</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Return_Items_Input_Representation_Data</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_Screen</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Created_Refund_Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Refund</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>RefundNumber</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Credit_Memo_Lines</name>
        <label>Get Credit Memo Lines</label>
        <locationX>1379</locationX>
        <locationY>1750</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>L20_Loop_Over_CreditMemoLines</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>CreditMemoId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>S_CreateCreditMemoOutputRepresentation.creditMemoId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>CreditMemoLine</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_CreditMemo_Reocord</name>
        <label>Get CreditMemo Reocord</label>
        <locationX>954</locationX>
        <locationY>1510</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Last_Credit_Memo_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>S_CreateCreditMemoOutputRepresentation.creditMemoId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CreditMemo</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>DocumentNumber</queriedFields>
        <sortField>Id</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Last_Credit_Memo_Record</name>
        <label>Get Last Credit Memo Record</label>
        <locationX>1068</locationX>
        <locationY>1508</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Previous_Credit_Memo_Exists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DocumentNumber__c</field>
            <operator>EndsWith</operator>
            <value>
                <elementReference>Get_Order_Delivery_Group_Summary.DeliverToCountry</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CreditMemo</object>
        <sortField>DocumentNumber__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_ODM</name>
        <label>Get ODM</label>
        <locationX>863</locationX>
        <locationY>1501</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_CreditMemo_Reocord</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Order_Delivery_Group_Summary.OrderDeliveryMethodId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OrderDeliveryMethod</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_OPS_Refunds</name>
        <label>Get OPS Refunds</label>
        <locationX>529</locationX>
        <locationY>944</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Amount_OPS_Refunds</targetReference>
        </connector>
        <filterLogic>1 AND (2 OR 3)</filterLogic>
        <filters>
            <field>OrderPaymentSummaryId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_OrderPaymentSummary.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Processed</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Draft</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Refund</object>
        <sortField>Id</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Order_Delivery_Group_Summary</name>
        <label>Get Order Delivery Group Summary</label>
        <locationX>769</locationX>
        <locationY>1506</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_ODM</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OrderSummaryId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_RO_Record.OrderSummaryId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OrderDeliveryGroupSummary</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>DeliverToCountry</queriedFields>
        <queriedFields>OrderDeliveryMethodId</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Order_Product_Summary</name>
        <label>Get Order Product Summary</label>
        <locationX>1107</locationX>
        <locationY>667</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Delivery_Charge_Null_OR_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OrderSummaryId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_RO_Record.OrderSummaryId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Type</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Delivery Charge</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OrderItemSummary</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Order_Product_Summary_0</name>
        <label>Get Order Product Summary</label>
        <locationX>206</locationX>
        <locationY>782</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Shipping_Item_Input</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OrderSummaryId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_RO_Record.OrderSummaryId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Type</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Delivery Charge</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OrderItemSummary</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_OrderPaymentSummary</name>
        <label>Get OrderPaymentSummary</label>
        <locationX>707</locationX>
        <locationY>689</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>List_of_Items_To_refund</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OrderSummaryId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_RO_Record.OrderSummaryId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OrderPaymentSummary</object>
        <sortField>Id</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_OS</name>
        <label>Get OS</label>
        <locationX>675</locationX>
        <locationY>1506</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Order_Delivery_Group_Summary</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_RO_Record.OrderSummaryId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>OrderSummary</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Product_Standard_delivery</name>
        <label>Get Product Standard delivery</label>
        <locationX>1161</locationX>
        <locationY>502</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Standard delivery</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Product2</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_ReturnOrderLineItems</name>
        <label>Get ReturnOrderLineItems</label>
        <locationX>1425</locationX>
        <locationY>386</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Any_ROLI_To_Process</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ReturnOrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_RO_Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>RepaymentMethod</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Refund</stringValue>
            </value>
        </filters>
        <filters>
            <field>FollowUpProcessed__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>QuantityReceived</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ReturnOrderLineItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_RO_Record</name>
        <label>Get RO Record</label>
        <locationX>845</locationX>
        <locationY>148</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_All_RO</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ReturnOrder</object>
        <sortField>Id</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Credit_Memo</name>
        <label>Update Credit Memo</label>
        <locationX>1227</locationX>
        <locationY>1750</locationY>
        <connector>
            <targetReference>Get_Credit_Memo_Lines</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_Screen_0</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>S_CreateCreditMemoOutputRepresentation.creditMemoId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CreditMemoNumber</field>
            <value>
                <elementReference>FX_CreditMemoDocumentNumber</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>DocumentNumber__c</field>
            <value>
                <elementReference>FX_CreditMemoDocumentNumber</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PDFGenerationStatus__c</field>
            <value>
                <stringValue>Not Started</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Refund__c</field>
            <value>
                <elementReference>Get_Created_Refund_Number.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ReturnOrder__c</field>
            <value>
                <elementReference>Get_RO_Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>CreditMemo</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Credit_Memo1</name>
        <label>Update Credit Memo</label>
        <locationX>1379</locationX>
        <locationY>1515</locationY>
        <connector>
            <targetReference>Get_Credit_Memo_Lines</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_Screen_0</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>S_CreateCreditMemoOutputRepresentation.creditMemoId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CreditMemoNumber</field>
            <value>
                <elementReference>FX_First_Credit_Memo_Ever_Created</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>DocumentNumber__c</field>
            <value>
                <elementReference>FX_First_Credit_Memo_Ever_Created</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PDFGenerationStatus__c</field>
            <value>
                <stringValue>Not Started</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Refund__c</field>
            <value>
                <elementReference>Get_Created_Refund_Number.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ReturnOrder__c</field>
            <value>
                <elementReference>Get_RO_Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>CreditMemo</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_CreditMemoLines</name>
        <label>Update CreditMemoLines</label>
        <locationX>1636</locationX>
        <locationY>1950</locationY>
        <connector>
            <targetReference>Assign_Data_To_Ensure_Refund</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_Screen_0</targetReference>
        </faultConnector>
        <inputReference>C_CreditMemoLines</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Return_Order</name>
        <label>Update Return Order</label>
        <locationX>1591</locationX>
        <locationY>945</locationY>
        <connector>
            <targetReference>Update_ROLI</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_Screen</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_RO_Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Already_Refunded__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Tech_ShippingFeeRefund__c</field>
            <value>
                <elementReference>AllowingTheShippingFeeRefundValue</elementReference>
            </value>
        </inputAssignments>
        <object>ReturnOrder</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_ROLI</name>
        <label>Update ROLI</label>
        <locationX>1751</locationX>
        <locationY>945</locationY>
        <connector>
            <targetReference>Get_Created_Refund_Number</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ReturnOrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>RepaymentMethod</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Refund</stringValue>
            </value>
        </filters>
        <filters>
            <field>QuantityReceived</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </filters>
        <inputAssignments>
            <field>FollowUpProcessed__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>ReturnOrderLineItem</object>
    </recordUpdates>
    <screens>
        <name>Error_on_Amount_Field</name>
        <label>Error on Amount Field</label>
        <locationX>1277</locationX>
        <locationY>497</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Display_Zone7</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;⚠️&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Sorry, Something is missing - please check the quantity received and the amount in return order line items!&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>OK</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Error_Screen</name>
        <label>Error Screen</label>
        <locationX>1492</locationX>
        <locationY>1181</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Display_Zone5</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;⛔&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Error while creating refund&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>OK</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Error_Screen_0</name>
        <label>Error Screen</label>
        <locationX>925</locationX>
        <locationY>1938</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Display_Zone5_0</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;⛔&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Error while creating CreditMemo/Ensure Refund &lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>OK</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Finish_Screen</name>
        <label>Finish Screen</label>
        <locationX>1789</locationX>
        <locationY>2336</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Publish_Created_Credit_Memo_Event</targetReference>
        </connector>
        <fields>
            <name>Success_Message</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 18px;&quot;&gt;✅&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;The Refund with number {!Get_Created_Refund_Number.RefundNumber}&amp;nbsp;and the Credit Memo with number {!Get_CreditMemo_Reocord.DocumentNumber}   are successfully created. &lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>OK</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>List_of_Items_To_refund</name>
        <label>List of Items To refund</label>
        <locationX>517</locationX>
        <locationY>693</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Check_The_Shipping_Fee_Refund</targetReference>
        </connector>
        <fields>
            <name>ListItems_DataTable</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>ReturnOrderLineItem</typeValue>
            </dataTypeMappings>
            <extensionName>c:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>displayAll</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cb_displayAll</name>
                <value>
                    <stringValue>CB_TRUE</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objectName</name>
                <value>
                    <stringValue>ReturnOrderLineItem</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cb_suppressBottomBar</name>
                <value>
                    <stringValue>CB_FALSE</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cb_navigateNextOnSave</name>
                <value>
                    <stringValue>CB_FALSE</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnFields</name>
                <value>
                    <stringValue>Sku__c,Description,QuantityReceived,GrossUnitPriceFormula__c,TotalWithTaxFormula__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cb_matchCaseOnFilters</name>
                <value>
                    <stringValue>CB_FALSE</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>C_ReturnOrderLineItem</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnLabels</name>
                <value>
                    <stringValue>Description:Product Name,QuantityReceived:Quantity,GrossUnitPriceFormula__c:Unit Price,TotalWithTaxFormula__c:Total Line Amount</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cb_suppressCurrencyConversion</name>
                <value>
                    <stringValue>CB_TRUE</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>hideClearSelectionButton</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cb_hideClearSelectionButton</name>
                <value>
                    <stringValue>CB_FALSE</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>hideCheckboxColumn</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cb_hideCheckboxColumn</name>
                <value>
                    <stringValue>CB_TRUE</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cb_isRequired</name>
                <value>
                    <stringValue>CB_FALSE</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cb_singleRowSelection</name>
                <value>
                    <stringValue>CB_FALSE</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnAlignments</name>
                <value>
                    <stringValue>Sku__c:left,Description:left,QuantityReceived:left,GrossUnitPrice:left,TotalAmount:left</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>suppressCurrencyConversion</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columnWidths</name>
                <value>
                    <stringValue>Sku__c:215, Description:235, QuantityReceived:190, GrossUnitPriceFormula__c:225, TotalWithTaxFormula__c:275</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>List_of_Items_To_refund_Section1</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>List_of_Items_To_refund_Section1_Column1</name>
                <fieldType>Region</fieldType>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>List_of_Items_To_refund_Section1_Column2</name>
                <fieldType>Region</fieldType>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>List_of_Items_To_refund_Section1_Column3</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>TotalAmount</name>
                    <fieldText>&lt;p&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;Total Amount :  &lt;/strong&gt;&lt;span style=&quot;font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;{!FX_RefundAmountToDisplayWithIsoCode}&lt;/span&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <fields>
            <name>List_of_Items_To_refund_Section2</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>List_of_Items_To_refund_Section2_Column1</name>
                <fieldType>Region</fieldType>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>8</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <fields>
                <name>List_of_Items_To_refund_Section2_Column2</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>AllowingTheShippingFeeRefund</name>
                    <extensionName>flowruntime:toggle</extensionName>
                    <fieldType>ComponentInstance</fieldType>
                    <inputParameters>
                        <name>label</name>
                        <value>
                            <stringValue>Refund shipping fees</stringValue>
                        </value>
                    </inputParameters>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <storeOutputAutomatically>true</storeOutputAutomatically>
                    <visibilityRule>
                        <conditionLogic>and</conditionLogic>
                        <conditions>
                            <leftValueReference>Get_All_RO.Id</leftValueReference>
                            <operator>IsNull</operator>
                            <rightValue>
                                <booleanValue>true</booleanValue>
                            </rightValue>
                        </conditions>
                        <conditions>
                            <leftValueReference>AllowShip</leftValueReference>
                            <operator>EqualTo</operator>
                            <rightValue>
                                <booleanValue>true</booleanValue>
                            </rightValue>
                        </conditions>
                    </visibilityRule>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>4</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <nextOrFinishButtonLabel>Refund</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>No_Initial_Capture</name>
        <label>No Initial Capture</label>
        <locationX>1069</locationX>
        <locationY>187</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Error_Payment_not_Captured</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;❌&lt;/strong&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong&gt;Cannot generate Refund. No initial funds were captured.&lt;/strong&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>OK</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>No_Ro_To_Process</name>
        <label>No Ro To Process</label>
        <locationX>526</locationX>
        <locationY>397</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Display_Zone1</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;❌&lt;/b&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Sorry, Something was wrong - Check you Data and try again later !&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>OK</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Refund_Not_Possible</name>
        <label>Refund Not Possible</label>
        <locationX>1171</locationX>
        <locationY>763</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>Refund_greater_than_Available_Refund</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;❌&lt;/strong&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong&gt;Cannot generate Refund. Refund exceeds the available refund.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>RO_Not_In_Recieved_Status</name>
        <label>RO  Not In Recieved Status</label>
        <locationX>526</locationX>
        <locationY>537</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Display_Zone2</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;⚠️&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Sorry, The Return Order should be in Received Status to Ensure Refund&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>OK</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>RO_ROLI_Exist_Screen</name>
        <label>RO  ROLI Exist Screen</label>
        <locationX>1603</locationX>
        <locationY>173</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Display_Zone3</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;⚠️&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Sorry, There is no ReturnOrderLineItem to refund - please check your data and try later!&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>OK</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Screen_Return_Order_Already_Refunded</name>
        <label>Return Order Already Refunded</label>
        <locationX>529</locationX>
        <locationY>270</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Display_Zone2_0</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;⚠️&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Sorry, The Return Order is already refunded&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>OK</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>405</locationX>
        <locationY>130</locationY>
        <connector>
            <targetReference>Get_RO_Record</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Close_Return_Order</name>
        <label>Close Return Order</label>
        <locationX>2199</locationX>
        <locationY>2341</locationY>
        <flowName>SOM_830_Close_Return_Order</flowName>
        <inputAssignments>
            <name>recordId</name>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <variables>
        <name>AdjustShippingItemInputRepresentation</name>
        <apexClass>ConnectApi__AdjustItemInputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>AllowShip</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>true</booleanValue>
        </value>
    </variables>
    <variables>
        <name>C_CreditMemoLines</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>CreditMemoLine</objectType>
    </variables>
    <variables>
        <name>C_OrderItemSummaries</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItemSummary</objectType>
    </variables>
    <variables>
        <name>C_ReturnOrderItemDeliveryCharge</name>
        <apexClass>ConnectApi__ReturnOrderItemDeliveryChargeInputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>C_ReturnOrderItemInputRepresentation</name>
        <apexClass>ConnectApi__ReturnOrderItemInputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>C_ReturnOrderLineItem</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ReturnOrderLineItem</objectType>
    </variables>
    <variables>
        <name>Created_Refund_Id</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>FLAG_From_Exchange_Order</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>S_AdjustShippingInputRepresentation</name>
        <apexClass>ConnectApi__AdjustOrderItemSummaryInputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>S_adjustShippingOutputRepresentation</name>
        <apexClass>ConnectApi__AdjustOrderSummaryOutputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>S_CreateCreditMemoInputRepresentation</name>
        <apexClass>ConnectApi__CreateCreditMemoInputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>S_CreateCreditMemoOutputRepresentation</name>
        <apexClass>ConnectApi__CreateCreditMemoOutputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>S_CreditMemoLine</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>CreditMemoLine</objectType>
    </variables>
    <variables>
        <name>S_EnsureRefundsAsyncInputRepresentation</name>
        <apexClass>ConnectApi__EnsureRefundsAsyncInputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>S_OrderItemSummary</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OrderItemSummary</objectType>
    </variables>
    <variables>
        <name>S_Refund_To_Create</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Refund</objectType>
    </variables>
    <variables>
        <name>S_RefundLinePayment</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>RefundLinePayment</objectType>
    </variables>
    <variables>
        <name>S_ReturnItemsInputRepresentation</name>
        <apexClass>ConnectApi__ReturnItemsInputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>S_ReturnItemsOutputRepresentation</name>
        <apexClass>ConnectApi__ReturnItemsOutputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>S_ReturnOrder_To_Update</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ReturnOrder</objectType>
    </variables>
    <variables>
        <name>S_ReturnOrderItemDeliveryCharge</name>
        <apexClass>ConnectApi__ReturnOrderItemDeliveryChargeInputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>S_ReturnOrderItemDeliveryChargeInputRepresentation</name>
        <apexClass>ConnectApi__ReturnOrderItemDeliveryChargeInputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>S_ReturnOrderItemInputRepresentation</name>
        <apexClass>ConnectApi__ReturnOrderItemInputRepresentation</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SUM_Amount</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>V_Refund_Amount</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>V_Refunded_Items</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varNumberOfLoopRun</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>1.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>Zeros</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
